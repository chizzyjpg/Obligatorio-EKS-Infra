<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>Registro</title></head>
<body>
  <h2>Registrar Usuario</h2>
  <form id="f">
    <input id="name" placeholder="Nombre" required>
    <input id="email" placeholder="Email" required>
    <input id="phone" placeholder="TelÃ©fono" required>
    <button>Guardar</button>
  </form>

  <h2>Usuarios</h2>
  <ul id="list"></ul>

  <script>
    const API = 'http://127.0.0.1:8000';

    async function load() {
      const r = await fetch(API + '/users/');
      const data = await r.json();
      list.innerHTML = data.map(u => `<li>${u.name} - ${u.email}</li>`).join('');
    }

    f.onsubmit = async e => {
      e.preventDefault();
      await fetch(API + '/users/create/', {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({
          name: name.value, email: email.value, phone: phone.value
        })
      });
      f.reset();
      load();
    };

    load();
  </script>
</body>
</html>
